#!/bin/zsh
cd redis-restore && CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o rds-restore && cd .. && mv redis-restore/rds-restore . && cd redis-dump && CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o rds-dump && cd .. && mv redis-dump/rds-dump . && cd redis-tools && CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o rds-tools && cd .. && mv redis-tools/rds-tools . && cd redis-rebalance && CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o rds-rebalance && cd .. && mv redis-rebalance/rds-rebalance . && docker rmi harbor.gzky.com/dongxy-projects/rds:5.0.8 && docker build -f Dockerfile -t harbor.gzky.com/dongxy-projects/rds:5.0.8 . &&  docker push harbor.gzky.com/dongxy-projects/rds:5.0.8
